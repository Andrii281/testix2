name: Pull
on: 
  pull_request:
    branches:
      - '*'

env:
  DAY_OF_WEEK: Monday
  
jobs:
  test:
    permissions: write-all
    runs-on: ubuntu-latest
    steps: 
      - name: Get repository code
        uses: actions/checkout@v3
      - name: pnpm use
        uses: pnpm/action-setup@v2
        with:
          version: 8
      - name: install
        run: pnpm i
      - name: Testing
        run: pnpm run test:coverage
      # - name: Summary
      #   run: npm run test:summary
      - name: Get Env
        run: pnpm run get-env
      - name: Set Env
        run: pnpm run set-env
      - name: Get Env
        run: pnpm run get-env
      - name: Jest Coverage Comment
        uses: actions/github-script@v6
        with:
          script: |
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: `${process.env.DAY_OF_WEEK}`
            })